[mgr]
prepend_keymap = [
	# =============================================================================
	# CUSTOM COMMANDS
	# =============================================================================

	{ on = [ "!" ], run = 'shell "$SHELL" --block --confirm', desc = "Open shell here" },
	{ on = [ "F" ], run = "plugin smart-filter", desc = "Smart filter" },
	{ on = [ "C" ], run = "plugin ouch", desc = "Compress with ouch" },
	{ on = [ "P" ], run = 'shell -- qlmanage -p "$@"', desc = "Quick Look preview" },
	{ on = [ "<C-b>" ], run = "seek -5", desc = "Seek up 5 units in the preview" },
	{ on = [ "<C-f>" ], run = "seek 5", desc = "Seek down 5 units in the preview" },

	# =============================================================================
	# CYRILLIC DUPLICATES
	# =============================================================================

	# Navigation (hjkl, gg, G, K, J)
	{ on = [ "р" ], run = "leave" },                     # h
	{ on = [ "о" ], run = "arrow 1" },                   # j
	{ on = [ "л" ], run = "arrow -1" },                  # k
	{ on = [ "д" ], run = "enter" },                     # l
	{ on = [ "Л" ], run = "arrow -50%" },                # K
	{ on = [ "О" ], run = "arrow 50%" },                 # J
	{ on = [ "п", "п" ], run = "arrow -99999999" },      # gg
	{ on = [ "П" ], run = "arrow 99999999" },            # G

	# Preview navigation
	{ on = [ "<C-и>" ], run = "seek -5", desc = "Seek up 5 units in the preview" },      # Ctrl+b
	{ on = [ "<C-а>" ], run = "seek 5", desc = "Seek down 5 units in the preview" },     # Ctrl+f

	# Selection (v, V, Ctrl+a, Ctrl+r)
	{ on = [ "м" ], run = "visual_mode" },               # v
	{ on = [ "М" ], run = "visual_mode --unset" },       # V
	{ on = [ "<C-ф>" ], run = "select_all --state=true" },   # Ctrl+a
	{ on = [ "<C-к>" ], run = "select_all --state=none" },   # Ctrl+r (NOT refresh!)

	# File operations (y, yy, p, P, x, X, d, dd, D, a, A, r, C)
	{ on = [ "н" ], run = "yank" },                      # y
	{ on = [ "н", "н" ], run = "yank" },                 # yy
	{ on = [ "з" ], run = "paste" },                     # p
	{ on = [ "З" ], run = "paste --force" },             # P (Shift+p) - NOT Quick Look!
	{ on = [ "ч" ], run = "link" },                      # x
	{ on = [ "Ч" ], run = "link --relative" },           # X
	{ on = [ "в" ], run = "remove" },                    # d
	{ on = [ "в", "в" ], run = "remove --permanently" }, # dd
	{ on = [ "В" ], run = "remove --permanently" },      # D
	{ on = [ "ф" ], run = "create" },                    # a
	{ on = [ "Ф" ], run = "create --dir" },              # A
	{ on = [ "к" ], run = "rename" },                    # r
	{ on = [ "С" ], run = "plugin ouch", desc = "Compress with ouch" },  # C (custom)

	# Search and filter (/, ?, f, F, s, z, Z)
	{ on = [ "." ], run = "search fd" },                 # /
	{ on = [ "," ], run = "search rg" },                 # ?
	{ on = [ "а" ], run = "find" },                      # f
	{ on = [ "А" ], run = "plugin smart-filter", desc = "Smart filter" },  # F
	{ on = [ "ы" ], run = "search none" },               # s
	{ on = [ "я" ], run = "jump fzf" },                  # z
	{ on = [ "Я" ], run = "jump zoxide" },               # Z

	# View and open (o, O, t)
	{ on = [ "щ" ], run = "open" },                      # o
	{ on = [ "Щ" ], run = "open --interactive" },        # O
	{ on = [ "е" ], run = "tab_create --current" },      # t

	# Sorting (,x combinations)
	{ on = [ "ь", "ь" ], run = "sort modified --reverse=no" },       # ,,
	{ on = [ "ь", "Ь" ], run = "sort modified --reverse" },          # ,M
	{ on = [ "ь", "с" ], run = "sort created --reverse=no" },        # ,c
	{ on = [ "ь", "С" ], run = "sort created --reverse" },           # ,C
	{ on = [ "ь", "у" ], run = "sort extension --reverse=no" },      # ,e
	{ on = [ "ь", "У" ], run = "sort extension --reverse" },         # ,E
	{ on = [ "ь", "ф" ], run = "sort alphabetical --reverse=no" },   # ,a
	{ on = [ "ь", "Ф" ], run = "sort alphabetical --reverse" },      # ,A
	{ on = [ "ь", "т" ], run = "sort natural --reverse=no" },        # ,n
	{ on = [ "ь", "Т" ], run = "sort natural --reverse" },           # ,N
	{ on = [ "ь", "ы" ], run = "sort size --reverse=no" },           # ,s
	{ on = [ "ь", "Ы" ], run = "sort size --reverse" },              # ,S

	# Tabs ([, ], {, })
	{ on = [ "х" ], run = "tab_switch -1 --relative" },  # [
	{ on = [ "ъ" ], run = "tab_switch 1 --relative" },   # ]
	{ on = [ "Х" ], run = "tab_swap -1" },               # {
	{ on = [ "Ъ" ], run = "tab_swap 1" },                # }

	# Tasks (w)
	{ on = [ "ц" ], run = "tasks_show" },                # w

	# Shell and commands (;, :)
	{ on = [ "ж" ], run = "shell" },                     # ;
	{ on = [ "Ж" ], run = "shell --block" },             # :

	# Miscellaneous (~, b, Ctrl+s, q, Q)
	{ on = [ "Ё" ], run = "cd ~" },                      # ~
	{ on = [ "и" ], run = "back" },                      # b
	{ on = [ "<C-ы>" ], run = "stop" },                  # Ctrl+s
	{ on = [ "й" ], run = "quit" },                      # q
	{ on = [ "Й" ], run = "quit --no-cwd-file" },        # Q
]

# =============================================================================
# INPUT MODE
# =============================================================================

[input]
prepend_keymap = [
	{ on = [ "<C-ф>" ], run = "move -999" },             # Ctrl+a
	{ on = [ "<C-у>" ], run = "move 999" },              # Ctrl+e
	{ on = [ "<C-р>" ], run = "backspace --under" },     # Ctrl+h
	{ on = [ "<C-г>" ], run = "kill bol" },              # Ctrl+u
	{ on = [ "<C-л>" ], run = "kill eol" },              # Ctrl+k
]

# =============================================================================
# COMPLETION MODE
# =============================================================================

[completion]
prepend_keymap = [
	{ on = [ "л" ], run = "arrow -1" },                  # k
	{ on = [ "о" ], run = "arrow 1" },                   # j
]

# =============================================================================
# HELP MODE
# =============================================================================

[help]
prepend_keymap = [
	{ on = [ "л" ], run = "arrow -1" },                  # k
	{ on = [ "о" ], run = "arrow 1" },                   # j
	{ on = [ "й" ], run = "quit" },                      # q
]
