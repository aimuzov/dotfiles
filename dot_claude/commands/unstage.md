---
allowed-tools: Bash(git reset:*), Bash(git status:*), Bash(git diff:*), Bash(git restore:*), AskUserQuestion
description: –£–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ stage —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

- Git —Å—Ç–∞—Ç—É—Å: !`git status --short`
- Staged —Ñ–∞–π–ª—ã: !`git diff --staged --name-status`
- Staged –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∫—Ä–∞—Ç–∫–∏–π diff): !`git diff --staged --stat`

## –¢–≤–æ—è –∑–∞–¥–∞—á–∞

–ü–æ–º–æ—á—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ stage (–∏–Ω–¥–µ–∫—Å–∞ git) —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º.

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ staged —Ñ–∞–π–ª–æ–≤**
   - –ï—Å–ª–∏ staged —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç, —Å–æ–æ–±—â–∏ –æ–± —ç—Ç–æ–º –∏ –∑–∞–≤–µ—Ä—à–∏—Å—å
   - –ü–æ–∫–∞–∂–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö staged —Ñ–∞–π–ª–æ–≤ —Å –∏—Ö —Å—Ç–∞—Ç—É—Å–∞–º–∏ (M/A/D)

2. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤**

   –°–≥—Ä—É–ø–ø–∏—Ä—É–π —Ñ–∞–π–ª—ã –ø–æ —Ç–∏–ø–∞–º –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞:

   **–ü–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:**
   - Fish —Ñ—É–Ω–∫—Ü–∏–∏: `dot_config/fish/functions/**/*.fish`
   - SketchyBar: `dot_config/sketchybar/**/*`
   - Yabai: `dot_config/yabai/**/*`
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/**/*.md`, `**/README.md`
   - –ö–æ–Ω—Ñ–∏–≥–∏: `dot_*`
   - –î—Ä—É–≥–æ–µ

   **–ü–æ —Ç–∏–ø—É –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   - –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (A)
   - –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (M)
   - –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (D)
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (R)

3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä**

   –ü—Ä–µ–¥–ª–æ–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É—è AskUserQuestion:

   **–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ –≥—Ä—É–ø–ø–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
   ```
   –ö–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–±—Ä–∞—Ç—å –∏–∑ stage?
   - Fish —Ñ—É–Ω–∫—Ü–∏–∏ (3 —Ñ–∞–π–ª–∞)
   - SketchyBar (5 —Ñ–∞–π–ª–æ–≤)
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
   - –£–±—Ä–∞—Ç—å –≤—Å—ë
   - –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é
   ```

   **–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ñ–∞–π–ª–∞–º**
   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é", –ø–æ–∫–∞–∂–∏ –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫:
   ```
   –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã —É–±—Ä–∞—Ç—å –∏–∑ stage? (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
   - dot_config/fish/functions/git.fish
   - dot_config/sketchybar/items/git.lua
   - docs/OVERVIEW.md
   - –û—Ç–º–µ–Ω–∞
   ```

4. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ unstage**

   –î–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤—ã–ø–æ–ª–Ω–∏:
   ```bash
   git restore --staged <—Ñ–∞–π–ª>
   ```

   –ò–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤:
   ```bash
   git reset
   ```

5. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**

   –ü–æ–∫–∞–∂–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
   - –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ unstaged
   - –¢–µ–∫—É—â–∏–π git status –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### –§–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞

**üìã Staged —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π:**
```
M  dot_config/fish/functions/git.fish
M  dot_config/sketchybar/items/git.lua
A  docs/new-feature.md
D  old-file.md
```

**‚úÖ Unstaged —Ñ–∞–π–ª—ã:**
```
dot_config/fish/functions/git.fish
docs/new-feature.md
```

**üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
```
Changes not staged for commit:
  modified:   dot_config/fish/functions/git.fish
  modified:   docs/new-feature.md

Changes to be committed:
  modified:   dot_config/sketchybar/items/git.lua
  deleted:    old-file.md
```

**üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π `git add` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ staging
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π `git checkout` –¥–ª—è –æ—Ç–º–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**Unstage –≤—Å–µ–≥–æ:**
```bash
git reset
```

**Unstage –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ (interactive):**
```bash
git restore --staged --patch <—Ñ–∞–π–ª>
```
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç unstage —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ —Ñ–∞–π–ª–∞, –ø—Ä–µ–¥–ª–æ–∂–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `git restore --staged -p` –∏ –æ–±—ä—è—Å–Ω–∏ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**Unstage –∏ —É–¥–∞–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ unstage, –Ω–æ –∏ —É–¥–∞–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏:
```
‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–≤—Å–µ–≥–¥–∞!
–§–∞–π–ª: dot_config/fish/functions/git.fish

–í—ã —É–≤–µ—Ä–µ–Ω—ã? (–¥–∞/–Ω–µ—Ç)
```

### –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ù–ï —É–¥–∞–ª—è–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- Unstage –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –∏–∑–º–µ–Ω–µ–Ω–∏–π - –æ–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ï—Å–ª–∏ —Ñ–∞–π–ª –±—ã–ª –Ω–æ–≤—ã–º (A), –ø–æ—Å–ª–µ unstage –æ–Ω —Å—Ç–∞–Ω–µ—Ç untracked
- –û–±—ä—è—Å–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É:
  - `git restore --staged` (unstage, –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è)
  - `git restore` (unstage –ò —É–¥–∞–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è)
  - `git reset` (unstage –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤)
  - `git reset --hard` (unstage –ò —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è - –û–ü–ê–°–ù–û!)

### –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**"–Ø —Å–ª—É—á–∞–π–Ω–æ –¥–æ–±–∞–≤–∏–ª —Ñ–∞–π–ª —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏"**
1. Unstage —Ñ–∞–π–ª: `git restore --staged .env`
2. –î–æ–±–∞–≤—å –≤ .gitignore: `echo ".env" >> .gitignore`
3. –ü—Ä–æ–≤–µ—Ä —å —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –≤ stage: `git status`

**"–•–æ—á—É unstage —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–∞–π–ª–µ"**
1. –ò—Å–ø–æ–ª—å–∑—É–π interactive mode: `git restore --staged -p <—Ñ–∞–π–ª>`
2. –í—ã–±–∏—Ä–∞–π hunks –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ unstage

**"–•–æ—á—É –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –∫–∞–∫ –±—ã–ª–æ –¥–æ git add"**
1. –î–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤: `git reset`
2. –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: `git restore --staged <—Ñ–∞–π–ª>`
